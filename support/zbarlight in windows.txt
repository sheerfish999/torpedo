

1) 安装zbar及其lib include，  https://sourceforge.net/projects/zbar/files/zbar/0.10/zbar-0.10-setup.exe/download   

2) 安装mingw 并加入 PATH， https://sourceforge.net/projects/mingw/files/Installer/

3) 进入pythonpath, 如： C:\Users\xxxxx\AppData\Local\Programs\Python\Python36

Lib\distutils, 创建文件 distutils.cfg 加两行:

[build]
compiler=mingw32

4) 下载 http://sourceware.org/pub/pthreads-win32/dll-latest/      中 dll  include  lib

将其复制到 PATH_MINGW32/ 下

5) pypi 下载  zbarlight, 修改 setup.py   注意其中路径要修改到zbar对应路径

ext_modules=[
        Extension(

下替换或添加:

	extra_compile_args=['-std=c99'],
	extra_link_args=["C:\Program Files (x86)\ZBar\lib\libzbar.dll.a"],
	library_dirs= ['C:\Program Files (x86)\ZBar\lib' ] ,
	include_dirs = [ 'C:\Program Files (x86)\ZBar\include' ],
	
remove line libraries=['zbar'],


=========== 问题： 

1） 报：   Unknown MS Compiler version 1900
进入pythonpath 中：
C:\Users\xxxxx\AppData\Local\Programs\Python\Python36\lib\distutils\cygwinccompiler.py

添加：
elif msc_ver == '1900':  
    # Visual Studio 2015 / Visual C++ 14.0  
    # "msvcr140.dll no longer exists" http://blogs.msdn.com/b/vcblog/archive/2014/06/03/visual-studio-14-ctp.aspx  
    return ['vcruntime140']  

注意添加本机已经有的合适的版本， 如  msvcr100

2）  undefined reference to `_imp__PyArg_ParseTu....

给 MinGW 安装 pexports 到 windows 目录
pexports：
http://download.csdn.net/download/winnuke/5883417

进入pythonpath 中：
C:\Users\xxxxx\AppData\Local\Programs\Python\Python36

pexports.exe python36.dll > python36.def

将 python36.dll python36.def 拷贝进入 msys 路径环境中，进入 msys:
dlltool.exe --dllname python36.dll --def python36.def --output-lib libpython36.a

得到的libpython36.a文件移动到python目录下的libs目录中(备份原来的)


其他问题可参考： http://www.jianshu.com/p/f968527e1d5e










